{"version":3,"sources":["mouse-effect.js"],"names":["window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","Twinkle","STAR_VERTEX_NUMS","MAX_STAR_NUM","starColor","starRadius","starBlur","initSymbols","particles","_pool","mouse","Mouse","prototype","gravity","color","radius","blur","_symbols","Symbols","render","ctx","speedRatio","magMax","magMin","scaleMax","symbols","symbolNum","length","symbol","size","drawSize","drawSizeHalf","drawScale","canvasWidth","canvas","width","canvasHeight","height","fieldLeft","fieldRight","fieldTop","fieldBottom","i","len","p","Math","min","speedX","speedY","random","_createParticle","vx","vy","x","y","scale","angle","push","splice","save","globalCompositeOperation","translate","rotate","drawImage","restore","fill","mag","PI","shift","Particle","init","cos","sin","update","parseColor","_createSymbol","vertexNum","context","center","document","createElement","getContext","fillStyle","colorToString","shadowBlur","shadowColor","r","a","beginPath","RE_RGB","RE_RGBA","RE_HSL","RE_HSLA","RE_HEX","str","replace","toLowerCase","match","parseInt","parseFloat","type","v0","v1","v2","Configs","backgroundColor","canvasBound","grad","twinkle","gui","timeoutId","getElementById","onWindowResize","addEventListener","onCanvasMouseMove","onCanvasMouseOut","dat","GUI","addColor","name","onChange","onGUISymbolSettingChange","add","step","close","e","innerWidth","innerHeight","getBoundingClientRect","cx","cy","createRadialGradient","sqrt","addColorStop","clientX","left","clientY","top","autoPos","enable","clearTimeout","fillRect"],"mappings":"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","file":"mouse-effect.js","sourcesContent":["/**\n * requestAnimationFrame\n */\nwindow.requestAnimationFrame = (function(){\n    return  window.requestAnimationFrame       ||\n            window.webkitRequestAnimationFrame ||\n            window.mozRequestAnimationFrame    ||\n            window.oRequestAnimationFrame      ||\n            window.msRequestAnimationFrame     ||\n            function (callback) { window.setTimeout(callback, 1000 / 60); };\n})();\n\n\n/**\n * Twinkle\n */\nvar Twinkle = (function() {\n\n    // Config\n\n    var STAR_VERTEX_NUMS = [4, 6, 8, 10, 12],\n        MAX_STAR_NUM = 2500;\n\n\n    /**\n     * @constructor\n     */\n    function Twinkle(starColor, starRadius, starBlur) {\n        this.initSymbols(starColor, starRadius, starBlur);\n\n        this.particles = [];\n        this._pool = [];\n        this.mouse = new Mouse();\n    }\n\n    Twinkle.prototype = {\n        mouse: null,\n        gravity: 0.035,\n\n        initSymbols: function(color, radius, blur) {\n            this._symbols = new Symbols(color, radius, blur);\n        },\n\n        render: function(ctx) {\n            var particles = this.particles,\n                mouse = this.mouse,\n                gravity = this.gravity,\n                speedRatio,\n                magMax,\n                magMin,\n                scaleMax,\n                symbols = this._symbols,\n                symbolNum = this._symbols.length,\n                symbol,\n                size = this._symbols.size,\n                radius = this._symbols.size * 0.5,\n                drawSize,\n                drawSizeHalf,\n                drawScale,\n                canvasWidth = ctx.canvas.width,\n                canvasHeight = ctx.canvas.height,\n                fieldLeft,\n                fieldRight,\n                fieldTop,\n                fieldBottom,\n                i, len, p;\n\n            speedRatio = Math.min((mouse.speedX * mouse.speedX + mouse.speedY * mouse.speedY) * 0.005, 1);\n\n            if (particles.length < MAX_STAR_NUM) {\n                magMax = 0.5 + 4.5 * speedRatio;\n                magMin = 0.1 + 0.5 * speedRatio;\n                scaleMax = 0.5 + 0.5 * speedRatio;\n                len = (3 * Math.random() | 0) + (20 * speedRatio | 0);\n                for (i = 0; i < len; i++) this._createParticle(magMin, magMax, scaleMax);\n            }\n\n            fieldLeft = -canvasWidth * 0.5;\n            fieldRight = canvasWidth * 1.5;\n            fieldTop = -canvasHeight * 0.5;\n            fieldBottom = canvasHeight * 1.5;\n\n            for (i = 0, len = particles.length; i < len; i++) {\n                p = particles[i];\n\n                p.vx += mouse.speedX * 0.03 * speedRatio;\n                p.vy += mouse.speedY * 0.03 * speedRatio + gravity;\n                p.x += p.vx + mouse.speedX;\n                p.y += p.vy + mouse.speedY;\n                p.scale -= 0.005;\n                p.angle += Math.random();\n\n                if (\n                    p.x + radius < fieldLeft   ||\n                    p.x - radius > fieldRight  ||\n                    p.y + radius < fieldTop    ||\n                    p.y - radius > fieldBottom ||\n                    p.scale <= 0\n                ) {\n                    this._pool.push(p);\n                    particles.splice(i, 1);\n                    len--;\n                    i--;\n                    continue;\n                }\n\n                drawScale = p.scale;\n\n                symbol = symbols[symbolNum * Math.random() | 0];\n                if (Math.random() < 0.7) drawScale *= 0.2;\n                drawSize = size * drawScale;\n                drawSizeHalf = drawSize * 0.5;\n\n                ctx.save();\n                ctx.globalCompositeOperation = 'lighter';\n                ctx.translate(p.x, p.y);\n                ctx.rotate(p.angle);\n                ctx.drawImage(symbol, 0, 0, size, size, -drawSizeHalf, -drawSizeHalf, drawSize, drawSize);\n                ctx.restore();\n            }\n\n            ctx.fill();\n\n            mouse.speedX = mouse.speedY = 0;\n        },\n\n        _createParticle: function(magMin, magMax, scaleMax) {\n            var mag = magMin + (magMax - magMin) * Math.random(),\n                angle = Math.PI * 2 * Math.random(),\n                p = this._pool.length ? this._pool.shift() : new Particle();\n\n            p.init(\n                this.mouse.x,\n                this.mouse.y,\n                mag * Math.cos(angle),\n                mag * Math.sin(angle),\n                scaleMax * Math.random(),\n                Math.PI * 2 * Math.random()\n            );\n\n            this.particles.push(p);\n        }\n    };\n\n\n    /**\n     * Mouse\n     * @private\n     */\n    function Mouse(x, y) {\n        this.x = x || 0;\n        this.y = y || 0;\n    }\n\n    Mouse.prototype = {\n        x: 0,\n        y: 0,\n        speedX: 0,\n        speedY: 0,\n\n        update: function(x, y) {\n            this.speedX = (this.x - x) * 0.7;\n            this.speedY = (this.y - y) * 0.7;\n            this.x = x;\n            this.y = y;\n        }\n    };\n\n\n    /**\n     * Symbols\n     * @see STAR_VERTEX_NUMS\n     * @private\n     */\n    function Symbols(color, radius, blur) {\n        this.color = parseColor(color);\n        this.size = (radius + blur) * 2;\n\n        for (var i = 0, len = STAR_VERTEX_NUMS.length; i < len; i++) {\n            this.push(this._createSymbol(STAR_VERTEX_NUMS[i], radius, blur));\n        }\n    }\n\n    Symbols.prototype = [];\n\n    Symbols.prototype._createSymbol = function(vertexNum, radius, blur) {\n        var canvas,\n            context,\n            size = this.size,\n            center = this.size / 2,\n            color = this.color;\n\n        canvas = document.createElement('canvas');\n        canvas.width = canvas.height = size;\n\n        context = canvas.getContext('2d');\n        context.fillStyle = colorToString(color[0], color[1], color[2], color[3],  color[4]);\n        context.shadowBlur = blur;\n        context.shadowColor = colorToString(color[0], color[1], color[2], color[3],  color[4] * 0.75);\n\n        var i, len, r, a;\n\n        context.beginPath();\n        for (i = 1, len = vertexNum * 2; i <= len; i++) {\n            r = i % 2 ? radius * 0.1 : radius;\n            a = Math.PI * 2 * i / len;\n            context[i === 1 ? 'moveTo' : 'lineTo'](center + r * Math.cos(a), center + r * Math.sin(a));\n        }\n        context.fill();\n\n        return canvas;\n    };\n\n\n    /**\n     * Particle\n     * @private\n     */\n    function Particle(x, y, vx, vy, scale, angle) {\n        this.init(x, y, vx, vy, scale, angle);\n    }\n\n    Particle.prototype.init = function(x, y, vx, vy, scale, angle) {\n        this.x = x || 0;\n        this.y = y || 0;\n        this.vx = vx || 0;\n        this.vy = vy || 0;\n        this.scale = scale || 0;\n        this.angle = angle || 0;\n    };\n\n\n    // Helpers\n\n    var parseColor = (function() {\n\n        var RE_RGB = /^rgb\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/,\n            RE_RGBA = /^rgba\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*([\\d\\.]+)\\s*\\)$/,\n            RE_HSL = /^hsl\\(\\s*([\\d\\.]+)\\s*,\\s*([\\d\\.]+)%\\s*,\\s*([\\d\\.]+)%\\s*\\)$/,\n            RE_HSLA = /^hsla\\(\\s*([\\d\\.]+)\\s*,\\s*([\\d\\.]+)%\\s*,\\s*([\\d\\.]+)%\\s*,\\s*([\\d\\.]+)\\s*\\)$/,\n            RE_HEX = /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/; // 6 digit\n\n        return function(str) {\n            str = str.replace(/^\\s*#|\\s*$/g, '');\n            str = str.toLowerCase();\n\n            var match;\n\n            // RGB(A)\n            if ((match = str.match(RE_RGB) || str.match(RE_RGBA))) {\n                return [\n                    'rgba',\n                    parseInt(match[1], 10),\n                    parseInt(match[2], 10),\n                    parseInt(match[3], 10),\n                    parseFloat(match.length === 4 ? 1 : match[4])\n                ];\n            }\n\n            // HSL(A)\n            if ((match = str.match(RE_HSL) || str.match(RE_HSLA))) {\n                return [\n                    'hsla',\n                    parseFloat(match[1]),\n                    parseFloat(match[2]),\n                    parseFloat(match[3]),\n                    parseFloat(match.length === 4 ? 1 : match[4])\n                ];\n            }\n\n            // Hex\n            if (str.length === 3) {\n                // Hex 3 digit -> 6 digit\n                str = str.replace(/(.)/g, '$1$1');\n            }\n            if ((match = str.match(RE_HEX))) {\n                return [\n                    'rgba',\n                    parseInt(match[1], 16),\n                    parseInt(match[2], 16),\n                    parseInt(match[3], 16),\n                    1\n                ];\n            }\n\n            return null;\n        };\n\n    })();\n\n    function colorToString(type, v0, v1, v2, a) {\n        if (type === 'rgba') return 'rgba(' + v0 + ',' + v1 + ',' + v2 + ',' + a + ')';\n        if (type === 'hsla') return 'hsla(' + v0 + ',' + v1 + '%,' + v2 + '%,' + a + ')';\n        else return '';\n    }\n\n\n    return Twinkle;\n\n})();\n\n\n// Initialize\n\n(function() {\n\n    // Configs\n\n    var Configs = {\n        backgroundColor: '#0d2234',\n        starColor: '#FFFFFF',\n        starRadius: 12,\n        starBlur: 4\n    };\n\n\n    // Vars\n\n    var canvas,\n        context,\n        canvasBound,\n        grad,\n        twinkle,\n        gui,\n        timeoutId;\n\n\n    // Initialize\n\n    function init() {\n        canvas = document.getElementById('c');\n        context = canvas.getContext('2d');\n\n        onWindowResize(null);\n\n        twinkle = new Twinkle(Configs.starColor, Configs.starRadius, Configs.starBlur);\n        twinkle.mouse.x = canvas.width / 2;\n        twinkle.mouse.y = canvas.height / 2;\n\n        window.addEventListener('resize', onWindowResize, false);\n        canvas.addEventListener('mousemove', onCanvasMouseMove, false);\n        canvas.addEventListener('mouseout', onCanvasMouseOut, false);\n\n        gui = new dat.GUI();\n        gui.addColor(Configs, 'backgroundColor').name('Background');\n        gui.addColor(Configs, 'starColor').name('Star Color').onChange(onGUISymbolSettingChange);\n        gui.add(Configs, 'starRadius', 1, 30).name('Star Radius').step(1).onChange(onGUISymbolSettingChange);\n        gui.add(Configs, 'starBlur', 0, 16).name('Star Blur').step(1).onChange(onGUISymbolSettingChange);\n        gui.close();\n\n        update();\n    }\n\n\n    // Event listeners\n\n    function onWindowResize(e) {\n        canvas.width = window.innerWidth;\n        canvas.height = window.innerHeight;\n        canvasBound = canvas.getBoundingClientRect();\n\n        var cx = canvas.width * 0.5,\n            cy = canvas.height * 0.5;\n        grad = context.createRadialGradient(cx, cy, 0, cx, cy, Math.sqrt(cx * cx + cy * cy));\n        grad.addColorStop(0, 'rgba(0, 0, 0, 0)');\n        grad.addColorStop(1, 'rgba(0, 0, 0, 0.35)');\n    }\n\n    function onCanvasMouseMove(e) {\n        twinkle.mouse.update(e.clientX - canvasBound.left, e.clientY - canvasBound.top);\n        autoPos.enable = false;\n    }\n\n    function onCanvasMouseOut(e) {\n    }\n\n    function onGUISymbolSettingChange() {\n        if (timeoutId) clearTimeout(timeoutId);\n\n        timeoutId = setTimeout(function() {\n            twinkle.initSymbols(Configs.starColor, Configs.starRadius, Configs.starBlur);\n        }, 300);\n    }\n\n\n    // Update\n\n    function update() {\n        context.fillStyle = Configs.backgroundColor;\n        context.fillRect(0, 0, canvas.width, canvas.height);\n        context.fillStyle = grad;\n        context.fillRect(0, 0, canvas.width, canvas.height);\n\n        twinkle.render(context);\n\n        requestAnimationFrame(update);\n    }\n\n\n    // Run\n\n    init();\n\n})();\n"]}